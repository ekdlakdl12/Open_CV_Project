<Window x:Class="WpfApp1.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Vehicle Detection Intelligence" Height="800" Width="1450"
        Background="#121212" Foreground="#E0E0E0"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="ModernBtn" TargetType="Button">
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12,5"/>
            <Setter Property="BorderBrush" Value="#3E3E42"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="DarkCombo" TargetType="ComboBox">
            <Setter Property="Background" Value="#EEEEEE"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#1E1E1E" CornerRadius="8" Padding="15,10" Margin="0,0,0,10" BorderBrush="#2D2D30" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Content="영상 불러오기" Style="{StaticResource ModernBtn}" Background="#007ACC" Command="{Binding OpenVideoCommand}"/>
                    <Button Content="정지" Style="{StaticResource ModernBtn}" Margin="5,0,0,0" Command="{Binding StopCommand}"/>
                </StackPanel>

                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="25,0">
                    <TextBlock Text="현재 파일" Foreground="#666" FontSize="9" FontWeight="Bold"/>
                    <TextBlock Text="{Binding VideoPath}" Foreground="#AAA" FontSize="11" MaxWidth="180" TextTrimming="CharacterEllipsis"/>
                </StackPanel>

                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                    <Border Background="#EEEEEE" CornerRadius="4" Padding="10,5" Margin="0,0,8,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="현재 주행 차량: " Foreground="#007ACC" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding DetectionsCount}" Foreground="Black" FontSize="16" FontWeight="ExtraBold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <Border Background="#252526" CornerRadius="4" Padding="10,5" BorderBrush="#3E3E42" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="방향별(L|F|R): " Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding CountText}" Foreground="#32D74B" FontSize="13" FontWeight="Bold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                    <StackPanel Margin="0,0,12,0">
                        <TextBlock Text="전체 차선" Foreground="#888" FontSize="9" HorizontalAlignment="Center" Margin="0,0,0,2"/>
                        <ComboBox Style="{StaticResource DarkCombo}" Width="55" ItemsSource="{Binding TotalLaneOptions}" SelectedItem="{Binding TotalLanes, Mode=TwoWay}" FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock Text="분석 차선" Foreground="#888" FontSize="9" HorizontalAlignment="Center" Margin="0,0,0,2"/>
                        <ComboBox Style="{StaticResource DarkCombo}" Width="55" ItemsSource="{Binding CurrentLaneOptions}" SelectedItem="{Binding CurrentLane, Mode=TwoWay}" FontWeight="Bold"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <Border Grid.Row="1" Background="Black" CornerRadius="8" ClipToBounds="True" BorderBrush="#333" BorderThickness="1">
            <Image Source="{Binding FrameImage}" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>